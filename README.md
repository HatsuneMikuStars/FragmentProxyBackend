# Fragment Proxy TypeScript API

Прокси API для работы с Fragment, написанный на TypeScript.

## Установка

```bash
yarn install
```

## Настройка конфигурации

1. Скопируйте файл шаблона конфигурации и заполните его своими данными:
```bash
cp src/config.example.ts src/config.ts
```

2. Отредактируйте файл `src/config.ts` и укажите:
   - Cookies для авторизации на Fragment (получите их после авторизации в браузере)
   - API хеш Fragment (можно найти в запросах при инспекции сетевого трафика)
   - Мнемоническую фразу вашего TON кошелька (для безопасности используйте переменные окружения)
   - API ключ TON (получите его от @tonapibot в Telegram)
   - Другие настройки при необходимости

**ВАЖНО**: Файл `src/config.ts` содержит чувствительные данные, он добавлен в `.gitignore` и не должен включаться в контроль версий.

## Запуск

### Консольное приложение

Для запуска в режиме консольного приложения:

```bash
# Разработка
yarn dev

# Продакшн
yarn build
yarn start
```

### API сервер

Для запуска API сервера:

```bash
# Разработка с автоматической перезагрузкой при изменениях
yarn dev:api

# Продакшн
yarn build
yarn start:api
```

По умолчанию API будет доступен по адресу: http://localhost:3000

## API Endpoints

### POST /api/buy-stars

Покупка звезд для пользователя Telegram.

**Запрос:**
```json
{
    "username": "string",  // Имя пользователя получателя (обязательно)
    "stars": "number"      // Количество звезд (по умолчанию берется из конфигурации)
}
```

**Успешный ответ:**
```json
{
    "success": true,
    "data": {
        "transaction": {
            "hash": "string",     // Хеш транзакции в TON
            "status": "string",   // Статус транзакции
            "stars": "number",    // Количество купленных звезд
            "amount": "number"    // Сумма в TON
        }
    }
}
```

**Ошибка:**
```json
{
    "success": false,
    "error": "string"      // Сообщение об ошибке
}
```

## Безопасность

1. **Не храните чувствительные данные в коде**: Используйте переменные окружения или защищенные хранилища.
2. **Не включайте файл конфигурации в репозиторий**: Файл `src/config.ts` добавлен в `.gitignore`.
3. **Регулярно обновляйте токены**: Для большей безопасности регулярно обновляйте токены авторизации. 