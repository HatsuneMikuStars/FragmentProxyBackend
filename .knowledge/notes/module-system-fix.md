## [2024-04-07 14:10] Исправление конфликта модульных систем

### Обнаруженная проблема
При деплое на продакшн-сервер возникала ошибка:

```
ReferenceError: exports is not defined in ES module scope
This file is being treated as an ES module because it has a '.js' file extension and '/opt/fragment-proxy/package.json' contains "type": "module".
```

Анализ показал конфликт между настройками системы модулей:
- В `package.json` было указано `"type": "module"`, что заставляло Node.js обрабатывать все `.js` файлы как ES модули
- В `tsconfig.json` указан `"module": "commonjs"`, что приводило к компиляции TypeScript кода в формат CommonJS

При компиляции TypeScript создавал код в формате CommonJS (с использованием `exports`), а Node.js пытался выполнить его как ES модуль, что приводило к ошибке.

### Решение
Удалена строка `"type": "module"` из файла `package.json`, чтобы привести формат модулей в соответствие с настройками компилятора TypeScript.

Теперь Node.js будет обрабатывать скомпилированные файлы как CommonJS модули, что соответствует формату, в который их компилирует TypeScript.

### Альтернативные решения, которые были рассмотрены
1. Изменить настройки TypeScript для компиляции в ES модули:
   ```json
   {
     "compilerOptions": {
       "module": "ESNext",
       // другие настройки
     }
   }
   ```
   
2. Переименовать файлы с расширения `.js` на `.cjs` для явного указания формата CommonJS

Первый вариант решения потребовал бы более масштабных изменений в коде, так как синтаксис импортов/экспортов отличается. Второй вариант усложнил бы конфигурацию проекта. Поэтому было выбрано наиболее простое и надежное решение - привести `package.json` в соответствие с `tsconfig.json`. 